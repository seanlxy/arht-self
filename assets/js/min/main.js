/*! arht 2018-03-21 */
!function(a){a.App=function(){this.config={serviceUrl:"/requests/service",loadedGalleries:{}}},a.App.prototype.init=function(){if(this.config=$.extend(!0,this.config,jsVars),this.toggleNav(".toggle-snav"),this.toggleElm(".toggle-elm"),this.initNewsletterSignup("#news-signup-form"),this.initPhotoswipe("[data-launch-gallery]"),this.initShopifyCustomSelect(".custom-select"),this.togglePaymentCCs('input[name="payment-method"]'),this.openTeamModal(),setTimeout(function(){app.initTeamShuffle("#shuffle")},500),$(".scroll-trigger").on("click",function(a){a.preventDefault();var b=$(window).height();scrollPoint=$(window).scrollTop(),scrollPoint<b&&$("html, body").delay(200).animate({scrollTop:b},{duration:350})}),this.initSlick(".main-slider__slick",{autoplay:!0,prevArrow:'<span class="fa fa-angle-left prev">',nextArrow:'<span class="fa fa-angle-right next">',fade:!0}),$(window).width()>=992){var a=$("#header");$(window).on("resize",function(){var b=$(this).height()-a.height()-70;$(".main-slider__slick__slide").height(b),$("#slider-container").height(b-150)}).trigger("resize")}$("#donate-btn").on("click",function(a){$(this).addClass("active"),$("#donation-section").slideToggle("slow",function(){$("#donate-btn").toggleClass("active",$(this).is(":visible"))})}),$("#accept_terms").on("click",function(){$("#terms_check").attr("checked",!0)}),$("#mobile-donate-btn").on("click",function(a){$(this).addClass("active"),$("#donation-section").fadeIn("fast",function(){$("#mobile-donate-btn").toggleClass("active",$(this).is(":visible"))})}),$("#mobile-btn").on("click",function(a){$(this).addClass("active"),$("#main-menu").fadeIn("fast",function(){$("#mobile-btn").toggleClass("active",$(this).is(":visible"))})}),$(".close-btn").on("click",function(a){$(this).parent().fadeOut("fast"),$("#mobile-donate-btn").removeClass("active")}),this.toggleDonationPricing(),this.initAutofill()},a.App.prototype.initShopifyCustomSelect=function(a){var b="custom-select--opened";$(document).on("click",a,function(c){c.stopPropagation();var d=$(this);d.hasClass("custom-select--disabled")||($(a).not(d).removeClass(b),d.hasClass(b)?d.removeClass(b):d.addClass(b))}).on("click",a+" .custom-select__item",function(c){c.stopPropagation();var d=$(this),e=d.data("value"),f=d.data("label"),g=d.parents(a);g.find(".custom-select__item").removeClass("custom-select__item--selected"),d.addClass("custom-select__item--selected"),g.find('input[type="hidden"]').val(e).trigger("change"),g.find(".custom-select__label").text(f),g.removeClass(b);var h=window.location.pathname,i=h.split("/"),j=i[1];window.location.replace(window.location.protocol+"//"+window.location.host+"/"+j+"/"+e)}).on("click",function(c){$(a).removeClass(b)})},a.App.prototype.toggleDonationPricing=function(){var a=".donation-radio__input",b="#other-amount-checkbox",c="#other-amount-input",d="invisible";$(document).on("change",a,function(){$(this).is(":checked")&&($(c).addClass(d),$(b).removeAttr("checked"))}).on("change",b,function(){var b=$(this),e=b.is(":checked"),f=$(c);e?(f.removeClass(d),$(a).removeAttr("checked")):f.addClass(d)})},a.App.prototype.openTeamModal=function(){if($(".team-wrap").length){var a=$(".team a[data-team]"),b=$(".modal.team-modal"),c=$(".modal .fa-times");a.on("click",function(a){a.preventDefault();var c=$(this).data("team");$('.team-member[data-team="'+c+'"]').fadeIn(),b.addClass("open"),$("html").addClass("no-of")}),c.on("click",function(){b.removeClass("open"),$("html").removeClass("no-of"),$(".team-member").fadeOut()})}if($(".team-modal").length){$(".team-nav").on("click",function(a){a.preventDefault();var b=$(".team-modal .team-member").length,c=$(".team-modal .team-member:visible");currentIndex=c.index()+1,c.hide(),$(this).hasClass("next")?currentIndex==b?$("div.team-member:first").fadeIn():c.next().fadeIn():1==currentIndex?$("div.team-member:last").fadeIn():c.prev().fadeIn()})}},a.App.prototype.initTeamShuffle=function(a){var b=$(a);if(b.length){b.shuffle({group:"all",itemSelector:".team",speed:450});var c=$(".filter-nav li a");c.on("click",function(a){a.preventDefault(),b.shuffle("shuffle",$(this).attr("data-group")),c.removeClass("active"),$(this).addClass("active")})}},a.App.prototype.getVar=function(a,b){if(b.hasOwnProperty(a))return b[a];for(var c in b)if(b[c].hasOwnProperty(a))return b[c][a];return!1},a.App.prototype.getConfigItem=function(a){return this.getVar(a,this.config)},a.App.prototype.toggleNav=function(a){var b=$(a);b.length&&b.on("click",function(a){a.preventDefault();var b=$(this),c=b.next(".sub-menu");c.length&&(c.toggle(),b.toggleClass("active"))})},a.App.prototype.togglePaymentCCs=function(a){$(document).on("click",a,function(){var a=$(this),b=$(a.data("target")),c="hidden";$(".icon-grp").addClass(c),b.length&&b.removeClass(c)})},a.App.prototype.toggleElm=function(a){var b=$(a);b.length&&b.on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("href"),d=$(c),e="active";d.length&&(b.hasClass(e)?(d.removeClass(e),$('[href="'+c+'"]').removeClass(e)):(d.addClass(e),$('[href="'+c+'"]').addClass(e)))})},a.App.prototype.matchElmHeight=function(a){var b="string"==typeof a?$(a):a;if(b){b.css("height","auto");var c=0;b.each(function(a,b){var d=$(b),e=d.height();e>c&&(c=e)}),b.css("height",c)}},a.App.prototype.initNewsletterSignup=function(a){var b=$(a);if(b.length){var c=b.find("#newsletter-submit");c.length&&c.on("click",function(a){a.preventDefault();var c=$.trim(b.find("#signup-email").val()),d="",e="text-dange",f=b.find(".msg");if(c){/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(c)?$.post(app.getConfigItem("serviceUrl"),"action=sign-up&email="+c,function(a){return a.msg&&f.removeAttr("class").addClass("msg "+a.type).html(a.msg),a.isValid&&setTimeout(function(){f.removeClass(a.type).html(""),b.find("#full-name").val(""),b.find("#signup-email").val("")},5e3),!1},"json"):d="Invalid email address provided."}else d="Your email address is required.";d&&f.removeAttr("class").addClass("msg "+e).html(d)})}},a.App.prototype.initMap=function(a){function b(a){var b,d,e=new google.maps.MarkerImage("/graphics/sprite.png",new google.maps.Size(16,28),new google.maps.Point(433,0)),f=[];a&&$.get(app.getConfigItem("serviceUrl"),"action=fetch-destination-map",function(g){if(g&&(d=new google.maps.InfoWindow({content:""}),b=new google.maps.Map(a,{center:{lat:13.817738419751203,lng:10.722125000000009},zoom:2,styles:c,scrollwheel:!1,draggable:$(window).width()>991}),g.length>0)){new google.maps.LatLngBounds;_.each(g,function(a){var c=new google.maps.LatLng(a.lat,a.lng),g=new google.maps.Marker({position:c,map:b,title:a.title,ind:a.hIndex,icon:e,infoWindowContent:""});f.push(g),google.maps.event.addListener(g,"click",function(){var c=this;d.setContent('<h5><a href="'+a.uri+'">'+c.title+"</a></h5>"),d.open(b,g)})})}},"json")}if(a=document.getElementById(a)){var c=[];0==c.length?$.get(app.getConfigItem("serviceUrl"),"action=fetch-map-styles",function(d){c=d,b(a)},"json"):b(a)}},a.App.prototype.initSlick=function(a,b){var c=$(a);if(c.length){var d={};b=$.extend(!0,d,b),c.slick(b)}},a.App.prototype.initPhotoswipe=function(b){function c(a,b,c){if(!a)return!1;app.config.loadedGalleries.hasOwnProperty(a)?"function"==typeof c&&c.call():$.get(app.getConfigItem("serviceUrl"),"action=fetch-gallery&key="+a,function(b){app.config.loadedGalleries[a]=b,"function"==typeof c&&c.call()},"json")}function d(a,b){if(!a)return!1;var c=app.config.loadedGalleries[a];if(c.length>0){b&&(f.index=b);new PhotoSwipe($(".pswp").get(0),PhotoSwipeUI_Default,c,f).init()}}if(app.getConfigItem("data").initGallery){var e=app.getConfigItem("templates").galleryModal;0==$(".pswp").length&&$("body").append(e);var f={index:0,shareEl:!1,preload:[1,3],history:!1,bgOpacity:.9};$("body").on("click",b,function(a){a.preventDefault();var b=$(this),e=b.is("li")?b.parents("ul").data("gallery"):b.data("launch-gallery"),g=b.data("index");if(b.hasClass("launch-gallery")){if(b.attr("href")&&b.data("size")){var h=b.parents(".gallery").find(".item a"),i=[],g=b.parents(".item").index();h.each(function(a,b){var c=$(b),d=c.data("size").split("x"),e=c.attr("href");i.push({src:e,w:d[0],h:d[1]})}),f.index=g;var j=new PhotoSwipe($(".pswp").get(0),PhotoSwipeUI_Default,i,f);j.init()}}else c(e,g,function(){d(e,g)})})}a.App.prototype.initAutofill=function(){function a(){d=new google.maps.places.Autocomplete(document.getElementById("address"),{types:["geocode"]}),d.addListener("place_changed",b)}function b(){var a=d.getPlace(),b=[];for(var c in e)document.getElementById(c).value="",document.getElementById(c).disabled=!1;for(var f=0;f<a.address_components.length;f++){var g=a.address_components[f].types[0];if(e[g]){var h=a.address_components[f][e[g]];document.getElementById(g).value=h}"street_number"==g?b[0]=h:"route"==g&&(b[1]=h)}document.getElementById("address").value=b.join(" ")}function c(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){var b={lat:a.coords.latitude,lng:a.coords.longitude},c=new google.maps.Circle({center:b,radius:a.coords.accuracy});d.setBounds(c.getBounds())})}var d,e={street_number:"short_name",route:"long_name",sublocality_level_1:"long_name",locality:"long_name",postal_code:"short_name"};$("#address").on("focus",function(){c()}),a()}}}(window);var app=new App;